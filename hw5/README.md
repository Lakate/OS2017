## Условие
Написать программу, которая запускает другие программы и следит за их состоянием.
У программы есть конфиг. файл, в котором прописано:
• имя исполняемого файла;
• параметры для передачи исполняемому файлу,
• способ наблюдения за ним: дождаться завершения, либо дождаться завершения и запустить заново еще одну копию.
Например: /bin/ls -l wait
/bin/sleep 15 respawn

Программа должна прочитать свой конфиг, с помощью вызова fork() создать нужное количество своих копий и запомнить идентификаторы процессов, которые стартовали.
В каждой из этих копий стартовать указанную программу с параметрами.
Если fork прошел успешно, то в спец. файл (/var/run/имяфайла.pid, или в /tmp) записать идентификатор запущенного процесса.

Если процесс завершился, то:
• если необходимо просто ожидать завершения, надо уничтожить соотв. ему файлы и больше не стартовать;
• если программу необходимо перезапустить, то запустить новый процесс с тем же исполняемым файлом и обновить соответствующий pid-файл.

Дополнительное требование 1.
• Возможно, что у какого-то из процессов испорчен/не существует исполняемый файл, либо заданы неверные параметры запуска. В этом случае если в течении определенного времени (например, 5 сек) будет больше 50 попыток неудачного запуска программы, то необходимо выдать сообщение (в лог) о том, что этот файл испорчен и в течении часа не повторять попыток его запуска.

Дополнительное требование 2.
• После своего запуска наша программа должна закрыть терминал, установить себе рабочий каталог в корень и в дальнейшем все свои сообщения выводить через систему логирования вызовом syslog (т.е. запускаться сразу как демон).

Дополнительное требование 3.
• Получив сигнал -HUP, программа должна перечитать конфиг. файл, завершить все дочерние процессы и запустить новые в соответствии с новым конфиг. файлом.


Ключевые слова:
• init: wait, respawn или xinetd • fork(), exec(), waitpid()
• signal(), kill –hup
Шаблон запуска потомков прикреплен к посту в вк.
Пример шаблона для создания демона есть в книге Робачевского (2е издание стр. 211).
